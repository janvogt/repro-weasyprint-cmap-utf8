# Invalid CMap table generated

This is a repro for an unrecoverable UTF-8 in a PDF generated by [weasyprint](https://github.com/Kozea/WeasyPrint).

Steps for reproduction:

1. > weasyprint example.html example.pdf
2. > cp example.pdf example_fixed.pdf
3. Use hex editor to fix the cmap table of example_fixed.pdf
by changing
```pdf
<10006c5b> <6c5b>
```
to
```pdf
<00006c5b> <6c5b>
```
4. > ./p2t.py
5. See that the character has been recovered in example_fixed.txt but not in example.txt

Step 3 is not necessary anymore after [https://github.com/Kozea/WeasyPrint/issues/1571#issuecomment-1043437045](https://github.com/Kozea/WeasyPrint/issues/1571#issuecomment-1043437045) is fixed.

# Requirements

This needs the python packages weasyprint (version 54.1) and pdftotext installed.

If you have a working nix setup use the provided `default.nix` by calling
> nix-shell

If you have direnv and nix, just use
> direnv allow
